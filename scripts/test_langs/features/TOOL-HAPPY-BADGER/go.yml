# TOOL-HAPPY-BADGER: Tool Happy Path Tests (Go - Badger)
#
# One happy-path test per registered tool against the Badger key-value store.
# Tests 5100-5122: Registered tools (expected_state: COMPLETE)
# Tests 5123-5139: Unregistered/TODO tools (expected_state: COMPLETE)

metadata:
  feature: TOOL-HAPPY-BADGER
  title: "Tool Happy Path - Badger"
  language: go
  project: badger
  project_root: ~/projects/badger
  ticket: tickets/in_progress/integration_testing_outcomes_results_1a.md
  description: >
    Validates every registered graph tool against the Badger key-value store.
    Each test exercises one tool with a project-specific query using real symbols.
    Badger is a Go embeddable key-value store built on an LSM tree architecture.

tests:
  # -- Registered Tools (00-22) -- expected_state: COMPLETE --

  - id: 5100
    name: badger_find_callers
    category: TOOL_HAPPY_PATH
    description: >
      find_callers tool against Badger. Target: Get method on Txn.
    query: |
      Who calls the Get method on the Txn type?
    expected_state: COMPLETE
    reference_answer: |
      Txn.Get has 4 callers: get, Release, updateLease, and read.
      These are internal methods within the badger package that use
      transactional reads for key lookups, lease management, and
      garbage collection operations.
    validations:
      - type: graph_tool_used

  - id: 5101
    name: badger_find_callees
    category: TOOL_HAPPY_PATH
    description: >
      find_callees tool against Badger. Target: DB.Open function.
    query: |
      What functions does DB.Open call?
    expected_state: COMPLETE
    reference_answer: |
      DB.Open calls functions for directory locking, manifest loading, memtable
      initialization, value log opening, and compaction manager setup.
    validations:
      - type: graph_tool_used

  - id: 5102
    name: badger_find_implementations
    category: TOOL_HAPPY_PATH
    description: >
      find_implementations tool against Badger. Target: Iterator interface.
    query: |
      What types implement the Iterator interface?
    expected_state: COMPLETE
    reference_answer: |
      The Iterator interface is implemented by types including MergeIterator,
      table iterator, and memtable iterator for LSM tree traversal.
    validations:
      - type: graph_tool_used

  - id: 5103
    name: badger_find_symbol
    category: TOOL_HAPPY_PATH
    description: >
      find_symbol tool against Badger. Target: DB struct.
    query: |
      Where is the DB struct defined?
    expected_state: COMPLETE
    reference_answer: |
      The DB struct is defined in db.go. It is the main entry point for
      interacting with a Badger database instance.
    validations:
      - type: graph_tool_used

  - id: 5104
    name: badger_find_references
    category: TOOL_HAPPY_PATH
    description: >
      find_references tool against Badger. Target: Entry type.
    query: |
      Where is the Entry type used across the codebase?
    expected_state: COMPLETE
    reference_answer: |
      The Entry type is used across transaction handling, batch writing,
      value log operations, and the write-ahead log subsystem.
    validations:
      - type: graph_tool_used

  - id: 5105
    name: badger_get_call_chain
    category: TOOL_HAPPY_PATH
    description: >
      get_call_chain tool against Badger. From DB.Open to value retrieval.
    query: |
      Show the call chain from DB.Open to value retrieval
    expected_state: COMPLETE
    reference_answer: |
      DB.Open -> initialization -> Transaction.Get -> table lookup ->
      value log read for retrieving stored values from the LSM tree.
    validations:
      - type: graph_tool_used

  - id: 5106
    name: badger_find_path
    category: TOOL_HAPPY_PATH
    description: >
      find_path tool against Badger. Between NewTransaction and Iterator.Seek.
    query: |
      Find the shortest path between DB.NewTransaction and Iterator.Seek
    expected_state: COMPLETE
    reference_answer: |
      DB.NewTransaction -> Transaction.NewIterator -> Iterator.Seek,
      traversing the transaction and iterator creation path.
    validations:
      - type: graph_tool_used

  - id: 5107
    name: badger_find_hotspots
    category: TOOL_HAPPY_PATH
    description: >
      find_hotspots tool against Badger.
    query: |
      What are the most connected functions (hotspots)?
    expected_state: COMPLETE
    reference_answer: |
      Top hotspots include functions in the DB type, transaction handling,
      LSM tree operations, and value log management.
    validations:
      - type: graph_tool_used

  - id: 5108
    name: badger_find_dead_code
    category: TOOL_HAPPY_PATH
    description: >
      find_dead_code tool against Badger.
    query: |
      Find unused or dead code
    expected_state: COMPLETE
    reference_answer: |
      Dead code analysis finds functions with zero incoming edges that are
      not entry points, test helpers, or init functions.
    validations:
      - type: graph_tool_used

  - id: 5109
    name: badger_find_cycles
    category: TOOL_HAPPY_PATH
    description: >
      find_cycles tool against Badger.
    query: |
      Find circular call dependencies
    expected_state: COMPLETE
    reference_answer: |
      Badger has circular dependencies in areas like compaction where
      level controllers reference DB and DB references level controllers.
    validations:
      - type: graph_tool_used

  - id: 5110
    name: badger_find_important
    category: TOOL_HAPPY_PATH
    description: >
      find_important tool (PageRank) against Badger.
    query: |
      What are the most important functions by PageRank?
    expected_state: COMPLETE
    reference_answer: |
      PageRank identifies central functions in DB operations, transaction
      management, and LSM tree compaction as most important.
    validations:
      - type: graph_tool_used

  - id: 5111
    name: badger_find_communities
    category: TOOL_HAPPY_PATH
    description: >
      find_communities tool (Leiden) against Badger.
    query: |
      Find natural code communities and module boundaries
    expected_state: COMPLETE
    reference_answer: |
      Communities align with Badger's subsystems: transaction management,
      LSM tree (table/memtable), value log, compaction, and manifest.
    validations:
      - type: graph_tool_used

  - id: 5112
    name: badger_find_articulation_points
    category: TOOL_HAPPY_PATH
    description: >
      find_articulation_points tool against Badger.
    query: |
      Find single points of failure
    expected_state: COMPLETE
    reference_answer: |
      Articulation points include key functions in DB that bridge between
      the transaction layer, LSM tree, and value log subsystems.
    validations:
      - type: graph_tool_used

  - id: 5113
    name: badger_find_dominators
    category: TOOL_HAPPY_PATH
    description: >
      find_dominators tool against Badger. Target: LSM tree write path.
    query: |
      What functions must be called before writing a value to the LSM tree?
    expected_state: COMPLETE
    reference_answer: |
      Dominators of LSM writes include transaction creation, entry
      validation, and write-ahead log recording before memtable insertion.
    validations:
      - type: graph_tool_used

  - id: 5114
    name: badger_find_loops
    category: TOOL_HAPPY_PATH
    description: >
      find_loops tool against Badger.
    query: |
      Find recursive functions and natural loops
    expected_state: COMPLETE
    reference_answer: |
      Recursive patterns exist in LSM tree compaction (level iteration),
      skiplist traversal, and merge iterator operations.
    validations:
      - type: graph_tool_used

  - id: 5115
    name: badger_find_merge_points
    category: TOOL_HAPPY_PATH
    description: >
      find_merge_points tool against Badger.
    query: |
      Where do different code paths converge in the compaction pipeline?
    expected_state: COMPLETE
    reference_answer: |
      Merge points include the table building stage where different
      compaction strategies converge to produce new SST files.
    validations:
      - type: graph_tool_used

  - id: 5116
    name: badger_find_common_dependency
    category: TOOL_HAPPY_PATH
    description: >
      find_common_dependency tool against Badger.
    query: |
      What shared dependency do Get and Set operations have?
    expected_state: COMPLETE
    reference_answer: |
      Both Get and Set depend on the Transaction type and its underlying
      oracle for timestamp management and MVCC coordination.
    validations:
      - type: graph_tool_used

  - id: 5117
    name: badger_find_control_dependencies
    category: TOOL_HAPPY_PATH
    description: >
      find_control_dependencies tool against Badger.
    query: |
      What conditionals control whether compaction runs?
    expected_state: COMPLETE
    reference_answer: |
      Compaction is controlled by level size thresholds, score calculations,
      and the compaction priority queue determining which levels need work.
    validations:
      - type: graph_tool_used

  - id: 5118
    name: badger_find_extractable_regions
    category: TOOL_HAPPY_PATH
    description: >
      find_extractable_regions tool against Badger.
    query: |
      Find functions that could be safely extracted
    expected_state: COMPLETE
    reference_answer: |
      SESE regions in large functions like DB.Open and compaction methods
      that have clear entry/exit points for extraction.
    validations:
      - type: graph_tool_used

  - id: 5119
    name: badger_check_reducibility
    category: TOOL_HAPPY_PATH
    description: >
      check_reducibility tool against Badger.
    query: |
      Check the control flow structure quality
    expected_state: COMPLETE
    reference_answer: |
      Reducibility analysis shows the overall control flow graph structure,
      identifying any irreducible regions that complicate analysis.
    validations:
      - type: graph_tool_used

  - id: 5120
    name: badger_find_critical_path
    category: TOOL_HAPPY_PATH
    description: >
      find_critical_path tool against Badger.
    query: |
      What is the mandatory call sequence to commit a transaction?
    expected_state: COMPLETE
    reference_answer: |
      The critical path goes through NewTransaction -> Set/Get operations ->
      Commit -> WAL write -> memtable update as the mandatory sequence.
    validations:
      - type: graph_tool_used

  - id: 5121
    name: badger_find_module_api
    category: TOOL_HAPPY_PATH
    description: >
      find_module_api tool against Badger. Target: badger package.
    query: |
      What is the public API of the badger package?
    expected_state: COMPLETE
    reference_answer: |
      The badger package exports DB, Transaction, Entry, Iterator, and Options
      types with methods for key-value storage operations.
    validations:
      - type: graph_tool_used

  - id: 5122
    name: badger_find_weighted_criticality
    category: TOOL_HAPPY_PATH
    description: >
      find_weighted_criticality tool against Badger.
    query: |
      What are the most critical functions by weighted importance?
    expected_state: COMPLETE
    reference_answer: |
      Weighted criticality combines PageRank, betweenness, and degree
      centrality to identify functions critical across multiple dimensions.
    validations:
      - type: graph_tool_used

  # -- Unregistered/TODO Tools (23-39) -- expected_state: COMPLETE --

  - id: 5123
    name: badger_find_entry_points
    category: TOOL_HAPPY_PATH
    description: >
      find_entry_points tool against Badger. Find execution entry points.
    query: |
      What are the entry points into this codebase?
    expected_state: COMPLETE
    reference_answer: |
      Entry points include DB.Open() for database initialization, exported
      API methods on DB and Txn types, and init() functions for package setup.
    validations:
      - type: graph_tool_used

  - id: 5124
    name: badger_trace_data_flow
    category: TOOL_HAPPY_PATH
    description: >
      trace_data_flow tool against Badger. Trace write pipeline data flow.
    query: |
      Trace how key-value data flows through the write pipeline
    expected_state: COMPLETE
    reference_answer: |
      Data flows from Txn.Set through the write-ahead log (WAL), into
      the memtable (skiplist), then through compaction to SST files on disk
      organized by levels in the LSM tree.
    validations:
      - type: graph_tool_used

  - id: 5125
    name: badger_trace_error_flow
    category: TOOL_HAPPY_PATH
    description: >
      trace_error_flow tool against Badger. Trace compaction errors.
    query: |
      Trace how errors propagate through the compaction system
    expected_state: COMPLETE
    reference_answer: |
      Compaction errors propagate from table iteration through the level
      compactor back to the DB, triggering retry logic or marking the
      database as needing recovery.
    validations:
      - type: graph_tool_used

  - id: 5126
    name: badger_find_config_usage
    category: TOOL_HAPPY_PATH
    description: >
      find_config_usage tool against Badger. Find Options usage.
    query: |
      How is the Options configuration used across Badger?
    expected_state: COMPLETE
    reference_answer: |
      Options is used in DB.Open for initialization, in compaction for
      level sizing, in value log for GC thresholds, and in memtable
      for skiplist sizing and flush triggers.
    validations:
      - type: graph_tool_used

  - id: 5127
    name: badger_find_similar_code
    category: TOOL_HAPPY_PATH
    description: >
      find_similar_code tool against Badger. Similar to compaction logic.
    query: |
      Find code similar to the compaction logic
    expected_state: COMPLETE
    reference_answer: |
      Code similar to compaction exists in the value log GC, stream
      processing, and backup/restore — all iterating over key ranges,
      reading entries, and writing to new destinations.
    validations:
      - type: graph_tool_used

  - id: 5128
    name: badger_build_minimal_context
    category: TOOL_HAPPY_PATH
    description: >
      build_minimal_context tool against Badger. Context for DB.Open.
    query: |
      Build minimal context needed to understand the DB.Open function
    expected_state: COMPLETE
    reference_answer: |
      Minimal context includes the DB struct, Options, manifest management,
      memtable initialization, value log setup, and the level controller
      that manages the LSM tree structure.
    validations:
      - type: graph_tool_used

  - id: 5129
    name: badger_summarize_file
    category: TOOL_HAPPY_PATH
    description: >
      summarize_file tool against Badger. Summarize db.go.
    query: |
      Summarize the db.go file
    expected_state: COMPLETE
    reference_answer: |
      db.go defines the DB struct, the main entry point for Badger. It
      contains Open, Close, and transaction management methods, plus
      background goroutine management for compaction and value log GC.
    validations:
      - type: graph_tool_used

  - id: 5130
    name: badger_summarize_package
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: summarize_package tool (not yet registered as standalone tool).
    query: |
      Summarize the table package and its subpackages
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5131
    name: badger_analyze_change_impact
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: analyze_change_impact tool (not yet registered as standalone tool).
    query: |
      What would be the impact of changing the Entry struct?
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5132
    name: badger_check_breaking_changes
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: check_breaking_changes tool (not yet registered as standalone tool).
    query: |
      Would removing the NewTransaction method be a breaking change?
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5133
    name: badger_simulate_change
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: simulate_change tool (not yet registered as standalone tool).
    query: |
      Simulate the impact of refactoring DB.Open into smaller methods
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5134
    name: badger_find_test_coverage
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: find_test_coverage tool (not yet registered as standalone tool).
    query: |
      Which functions in the badger package lack test coverage?
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5135
    name: badger_detect_side_effects
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: detect_side_effects tool (not yet registered as standalone tool).
    query: |
      What side effects does the DB.Open function have?
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5136
    name: badger_detect_patterns
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: detect_patterns tool (not yet registered as standalone tool).
    query: |
      What design patterns are used in this codebase?
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5137
    name: badger_find_code_smells
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: find_code_smells tool (not yet registered as standalone tool).
    query: |
      Find code smells in this codebase
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5138
    name: badger_find_duplication
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: find_duplication tool (not yet registered as standalone tool).
    query: |
      Find duplicated code patterns in this codebase
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  - id: 5139
    name: badger_extract_conventions
    category: TOOL_HAPPY_PATH_TODO
    description: >
      TODO: extract_conventions tool (not yet registered as standalone tool).
    query: |
      What coding conventions does this codebase follow?
    expected_state: COMPLETE
    reference_answer: |
      TODO: Tool not yet registered as standalone.
    validations: []

  # -- Additional find_callers tests (40-41) -- expected_state: COMPLETE --

  - id: 5140
    name: badger_find_callers_b
    category: TOOL_HAPPY_PATH
    description: >
      find_callers tool against Badger (test B). Target: DB.View method.
    query: |
      Who calls the DB.View method?
    expected_state: COMPLETE
    reference_answer: |
      DB.View has 5+ callers including: MergeOperator.Get, initBannedNamespaces,
      filterPrefixesToDrop, read (in testgc), and main (in testgc). These
      callers use read-only transactions for data lookups, namespace filtering,
      merge operations, and integration test verification.
    validations:
      - type: graph_tool_used

  - id: 5141
    name: badger_find_callers_c
    category: TOOL_HAPPY_PATH
    description: >
      find_callers tool against Badger (test C). Target: WriteBatch.Flush method.
    query: |
      Who calls the WriteBatch.Flush method?
    expected_state: COMPLETE
    reference_answer: |
      WriteBatch.Flush has 5+ callers including: StreamDB (stream-based DB
      loading), writeRandom, writeSorted (write benchmarks), doBackup (backup
      operations), and runTest (integration tests). These callers use batch
      writes for bulk data ingestion and database restore operations.
    validations:
      - type: graph_tool_used
  # -- Additional find_implementations tests (44-45) -- expected_state: COMPLETE --
  - id: 5144
    name: badger_find_implementations_b
    category: TOOL_HAPPY_PATH
    description: >
      find_implementations tool against Badger (test B). Target: TableInterface in table package.
    query: |
      What types implement the TableInterface in the table package?
    expected_state: COMPLETE
    reference_answer: |
      TableInterface in table/table.go is implemented by the Table struct
      which represents an SSTable file on disk with methods for key range
      queries, bloom filter checks, and version tracking.
    validations:
      - type: graph_tool_used

  - id: 5145
    name: badger_find_implementations_c
    category: TOOL_HAPPY_PATH
    description: >
      find_implementations tool against Badger (test C). Target: Logger interface.
    query: |
      What types implement the Logger interface in the badger package?
    expected_state: COMPLETE
    reference_answer: |
      The Logger interface in logger.go is implemented by defaultLog which
      wraps the standard library log.Logger with Errorf, Warningf, Infof,
      and Debugf methods for structured logging within BadgerDB.
    validations:
      - type: graph_tool_used

  # -- Additional find_callees tests (42-43) -- expected_state: COMPLETE --
  - id: 5142
    name: badger_find_callees_b
    category: TOOL_HAPPY_PATH
    description: >
      find_callees tool against Badger (test B). Target: Txn.Commit method.

    query: |
      What functions does Txn.Commit call?
    expected_state: COMPLETE
    reference_answer: |
      Txn.Commit calls Discard (deferred cleanup), commitPrecheck
      (validates transaction state), and commitAndSend (submits
      the write request to the database's write channel).
    validations:
      - type: graph_tool_used

  - id: 5143
    name: badger_find_callees_c
    category: TOOL_HAPPY_PATH
    description: >
      find_callees tool against Badger (test C). Target: DB.batchSet method.

    query: |
      What functions does DB.batchSet call?
    expected_state: COMPLETE
    reference_answer: |
      DB.batchSet calls sendToWriteCh to submit entries to the write
      channel and req.Wait to block until the write is committed.
    validations:
      - type: graph_tool_used

  # -- Additional find_symbol tests (46-47) -- expected_state: COMPLETE --

  - id: 5146
    name: badger_find_symbol_b
    category: TOOL_HAPPY_PATH
    description: >
      find_symbol tool against Badger (test B). Target: Txn struct.
    query: |
      Where is the Txn struct defined in this codebase?
    expected_state: COMPLETE
    reference_answer: |
      Txn is defined in txn.go. It represents a Badger transaction providing
      ACID guarantees with methods for Get, Set, Delete, and Commit
      using MVCC timestamp-based isolation.
    validations:
      - type: graph_tool_used

  - id: 5147
    name: badger_find_symbol_c
    category: TOOL_HAPPY_PATH
    description: >
      find_symbol tool against Badger (test C). Target: levelsController struct.
    query: |
      Where is the levelsController struct defined?
    expected_state: COMPLETE
    reference_answer: |
      levelsController is defined in levels.go. It manages the LSM tree
      level structure, controlling compaction scheduling, level size
      targets, and table management across all levels.
    validations:
      - type: graph_tool_used

  # -- Additional find_references tests (48-49) -- expected_state: COMPLETE --

  - id: 5148
    name: badger_find_references_b
    category: TOOL_HAPPY_PATH
    description: >
      find_references tool against Badger (test B). Target: Item struct.
    query: |
      Where is the Item struct referenced across this codebase?
    expected_state: COMPLETE
    reference_answer: |
      Item is referenced in txn.go for transaction reads, iterator.go
      for scan results, and throughout the public API where callers
      access key-value pairs returned by Get and Iterator operations.
    validations:
      - type: graph_tool_used

  - id: 5149
    name: badger_find_references_c
    category: TOOL_HAPPY_PATH
    description: >
      find_references tool against Badger (test C). Target: WriteBatch struct.
    query: |
      Where is WriteBatch referenced throughout the Badger codebase?
    expected_state: COMPLETE
    reference_answer: |
      WriteBatch is referenced in batch.go for batch write operations,
      stream.go for stream-based loading, backup.go for database restore,
      and in test and benchmark files for bulk write testing.
    validations:
      - type: graph_tool_used

  # -- Additional get_call_chain tests (50-51) -- expected_state: COMPLETE --

  - id: 5150
    name: badger_get_call_chain_b
    category: TOOL_HAPPY_PATH
    description: >
      get_call_chain tool against Badger (test B). Target: compaction pipeline.
    query: |
      Show the call chain from compaction trigger to SST file creation
    expected_state: COMPLETE
    reference_answer: |
      levelsController.runCompactor -> doCompact -> compactBuildTables ->
      table.CreateTable, following the compaction pipeline from trigger
      to new sorted string table creation on disk.
    validations:
      - type: graph_tool_used

  - id: 5151
    name: badger_get_call_chain_c
    category: TOOL_HAPPY_PATH
    description: >
      get_call_chain tool against Badger (test C). Target: memtable flush.
    query: |
      Show the call chain from memtable flush to disk persistence
    expected_state: COMPLETE
    reference_answer: |
      DB.flushMemtable -> handleFlushTask -> levelsController.addLevel0Table ->
      table creation and manifest update, converting in-memory data to
      persistent SST files.
    validations:
      - type: graph_tool_used

  # -- Additional find_path tests (52-53) -- expected_state: COMPLETE --

  - id: 5152
    name: badger_find_path_b
    category: TOOL_HAPPY_PATH
    description: >
      find_path tool against Badger (test B). Between DB.Open and garbage collection.
    query: |
      Find the shortest path between DB.Open and garbage collection
    expected_state: COMPLETE
    reference_answer: |
      DB.Open -> value log initialization -> DB.RunValueLogGC ->
      vlog.runGC -> rewrite, connecting database startup to the
      value log garbage collection mechanism.
    validations:
      - type: graph_tool_used

  - id: 5153
    name: badger_find_path_c
    category: TOOL_HAPPY_PATH
    description: >
      find_path tool against Badger (test C). Between WriteBatch and compaction.
    query: |
      Find the shortest path from WriteBatch.Set to compaction
    expected_state: COMPLETE
    reference_answer: |
      WriteBatch.Set -> Flush -> sendToWriteCh -> writeRequests ->
      flushMemtable triggers -> levelsController.runCompactor when
      level 0 tables accumulate beyond threshold.
    validations:
      - type: graph_tool_used

  # -- Additional find_hotspots tests (54-55) -- expected_state: COMPLETE --

  - id: 5154
    name: badger_find_hotspots_b
    category: TOOL_HAPPY_PATH
    description: >
      find_hotspots tool against Badger (test B). Focus on the table package.
    query: |
      What are the hotspot functions in the table package?
    expected_state: COMPLETE
    reference_answer: |
      Top hotspots in the table package include Table.NewIterator,
      block reading functions, bloom filter operations, and the
      table builder methods used during compaction and flush.
    validations:
      - type: graph_tool_used

  - id: 5155
    name: badger_find_hotspots_c
    category: TOOL_HAPPY_PATH
    description: >
      find_hotspots tool against Badger (test C). Focus on write path hotspots.
    query: |
      What are the hotspot functions in the Badger write path subsystem?
    expected_state: COMPLETE
    reference_answer: |
      Write path hotspots include writeRequests, sendToWriteCh,
      flushMemtable, and the WAL write functions that serve as
      central coordination points for all write operations.
    validations:
      - type: graph_tool_used

  # -- Additional find_dead_code tests (56-57) -- expected_state: COMPLETE --

  - id: 5156
    name: badger_find_dead_code_b
    category: TOOL_HAPPY_PATH
    description: >
      find_dead_code tool against Badger (test B). Focus on the value log subsystem.
    query: |
      Find unused or dead code in the value log subsystem
    expected_state: COMPLETE
    reference_answer: |
      Dead code analysis in the value log identifies unused helper
      functions, deprecated GC strategies, and internal utility
      methods that are no longer called from the main code paths.
    validations:
      - type: graph_tool_used

  - id: 5157
    name: badger_find_dead_code_c
    category: TOOL_HAPPY_PATH
    description: >
      find_dead_code tool against Badger (test C). Focus on exported but uncalled functions.
    query: |
      Which exported functions in Badger have no internal callers?
    expected_state: COMPLETE
    reference_answer: |
      Exported functions with no internal callers include public API
      methods designed for external consumers, deprecated utility
      functions, and convenience wrappers only used in tests.
    validations:
      - type: graph_tool_used

  # -- Additional find_cycles tests (58-59) -- expected_state: COMPLETE --

  - id: 5158
    name: badger_find_cycles_b
    category: TOOL_HAPPY_PATH
    description: >
      find_cycles tool against Badger (test B). Focus on the transaction subsystem.
    query: |
      Find circular call dependencies in the transaction subsystem
    expected_state: COMPLETE
    reference_answer: |
      Circular dependencies in the transaction subsystem involve
      Txn referencing DB for oracle access, and DB methods creating
      transactions for internal operations like GC and compaction checks.
    validations:
      - type: graph_tool_used

  - id: 5159
    name: badger_find_cycles_c
    category: TOOL_HAPPY_PATH
    description: >
      find_cycles tool against Badger (test C). Focus on shortest cycles.
    query: |
      What are the shortest circular call chains in Badger?
    expected_state: COMPLETE
    reference_answer: |
      The shortest cycles involve two-function mutual calls such as
      iterator operations that call back into table lookup methods
      and level controller methods that reference each other during
      compaction scheduling.
    validations:
      - type: graph_tool_used

  # -- Additional find_important tests (60-61) -- expected_state: COMPLETE --

  - id: 5160
    name: badger_find_important_b
    category: TOOL_HAPPY_PATH
    description: >
      find_important tool against Badger (test B). Focus on the compaction subsystem.
    query: |
      What are the most important functions in the compaction subsystem by PageRank?
    expected_state: COMPLETE
    reference_answer: |
      PageRank in compaction identifies levelsController.doCompact,
      compactBuildTables, and pickCompactLevels as most important,
      reflecting their central role in LSM tree maintenance.
    validations:
      - type: graph_tool_used

  - id: 5161
    name: badger_find_important_c
    category: TOOL_HAPPY_PATH
    description: >
      find_important tool against Badger (test C). Focus on comparing read vs write path.
    query: |
      Which functions are most important in the read path versus the write path?
    expected_state: COMPLETE
    reference_answer: |
      Read path importance centers on Txn.Get, table.Iterator, and
      MergeIterator, while write path importance centers on
      writeRequests, flushMemtable, and the WAL recording functions.
    validations:
      - type: graph_tool_used

  # -- Additional find_communities tests (62-63) -- expected_state: COMPLETE --

  - id: 5162
    name: badger_find_communities_b
    category: TOOL_HAPPY_PATH
    description: >
      find_communities tool against Badger (test B). Focus on storage layer communities.
    query: |
      What code communities exist within the storage layer?
    expected_state: COMPLETE
    reference_answer: |
      Storage layer communities include the memtable/skiplist cluster,
      the SST table reading/writing cluster, the value log cluster,
      and the manifest/directory management cluster.
    validations:
      - type: graph_tool_used

  - id: 5163
    name: badger_find_communities_c
    category: TOOL_HAPPY_PATH
    description: >
      find_communities tool against Badger (test C). Ask about inter-community coupling.
    query: |
      Which code communities in Badger are most tightly coupled?
    expected_state: COMPLETE
    reference_answer: |
      The transaction community and DB core community are most tightly
      coupled, followed by the compaction community and table community,
      reflecting the LSM tree's inherent cross-cutting concerns.
    validations:
      - type: graph_tool_used

  # -- Additional find_articulation_points tests (64-65) -- expected_state: COMPLETE --

  - id: 5164
    name: badger_find_articulation_points_b
    category: TOOL_HAPPY_PATH
    description: >
      find_articulation_points tool against Badger (test B). Focus on the write pipeline.
    query: |
      What are the single points of failure in the write pipeline?
    expected_state: COMPLETE
    reference_answer: |
      Articulation points in the write pipeline include writeRequests
      (the central write coordinator), sendToWriteCh (the write channel
      gateway), and flushMemtable (the persistence boundary).
    validations:
      - type: graph_tool_used

  - id: 5165
    name: badger_find_articulation_points_c
    category: TOOL_HAPPY_PATH
    description: >
      find_articulation_points tool against Badger (test C). Focus on risk assessment.
    query: |
      Which functions, if removed, would disconnect the read path from the write path?
    expected_state: COMPLETE
    reference_answer: |
      Key bridging functions include DB methods that connect transaction
      creation to both read and write paths, the memtable which serves
      both paths, and the levels controller coordinating reads and compaction.
    validations:
      - type: graph_tool_used

  # -- Additional find_dominators tests (66-67) -- expected_state: COMPLETE --

  - id: 5166
    name: badger_find_dominators_b
    category: TOOL_HAPPY_PATH
    description: >
      find_dominators tool against Badger (test B). Target: compaction execution.
    query: |
      What functions must be called before a compaction can execute?
    expected_state: COMPLETE
    reference_answer: |
      Dominators of compaction include DB.Open for initialization,
      levelsController setup, pickCompactLevels for target selection,
      and compactDef construction before doCompact can execute.
    validations:
      - type: graph_tool_used

  - id: 5167
    name: badger_find_dominators_c
    category: TOOL_HAPPY_PATH
    description: >
      find_dominators tool against Badger (test C). Target: iterator creation.
    query: |
      What functions dominate the iterator creation path?
    expected_state: COMPLETE
    reference_answer: |
      Dominators of iterator creation include DB.NewTransaction for
      transaction setup, Txn.NewIterator for iterator initialization,
      and the table iterator factory methods that provide level access.
    validations:
      - type: graph_tool_used

  # -- Additional find_loops tests (68-69) -- expected_state: COMPLETE --

  - id: 5168
    name: badger_find_loops_b
    category: TOOL_HAPPY_PATH
    description: >
      find_loops tool against Badger (test B). Focus on the skiplist data structure.
    query: |
      Find recursive patterns in the skiplist implementation
    expected_state: COMPLETE
    reference_answer: |
      The skiplist implementation uses iterative loops for level
      traversal in findNear, findSpliceForLevel, and iterator
      advancement, with natural loop structures for node searching.
    validations:
      - type: graph_tool_used

  - id: 5169
    name: badger_find_loops_c
    category: TOOL_HAPPY_PATH
    description: >
      find_loops tool against Badger (test C). Focus on self-recursive functions.
    query: |
      Which functions in Badger call themselves directly?
    expected_state: COMPLETE
    reference_answer: |
      Self-recursive functions include merge iterator operations that
      recurse during multi-way merge, tree traversal helpers in the
      manifest system, and retry loops in write path error handling.
    validations:
      - type: graph_tool_used

  # -- Additional find_merge_points tests (70-71) -- expected_state: COMPLETE --

  - id: 5170
    name: badger_find_merge_points_b
    category: TOOL_HAPPY_PATH
    description: >
      find_merge_points tool against Badger (test B). Focus on read path convergence.
    query: |
      Where do memtable reads and SST table reads converge?
    expected_state: COMPLETE
    reference_answer: |
      Memtable and SST reads converge at the merge iterator level where
      results from the active memtable, immutable memtables, and SST
      tables are combined in sorted order for the transaction read path.
    validations:
      - type: graph_tool_used

  - id: 5171
    name: badger_find_merge_points_c
    category: TOOL_HAPPY_PATH
    description: >
      find_merge_points tool against Badger (test C). Focus on data ingestion paths.
    query: |
      Where do single writes, batch writes, and stream loading converge?
    expected_state: COMPLETE
    reference_answer: |
      Single writes (Txn.Commit), batch writes (WriteBatch.Flush), and
      stream loading all converge at writeRequests/sendToWriteCh where
      entries are submitted to the central write processing loop.
    validations:
      - type: graph_tool_used

  # -- Additional find_common_dependency tests (72-73) -- expected_state: COMPLETE --

  - id: 5172
    name: badger_find_common_dependency_b
    category: TOOL_HAPPY_PATH
    description: >
      find_common_dependency tool against Badger (test B). Between compaction and GC.
    query: |
      What shared dependency do compaction and garbage collection have?
    expected_state: COMPLETE
    reference_answer: |
      Both compaction and GC depend on the levelsController for level
      management, the manifest for tracking table files, and the
      value log for coordinating data cleanup between LSM and vlog.
    validations:
      - type: graph_tool_used

  - id: 5173
    name: badger_find_common_dependency_c
    category: TOOL_HAPPY_PATH
    description: >
      find_common_dependency tool against Badger (test C). Between iterator and transaction.
    query: |
      What common dependencies do Iterator and Txn share?
    expected_state: COMPLETE
    reference_answer: |
      Iterator and Txn both depend on the oracle for read timestamps,
      the table access layer for key lookups, and the memtable
      references for accessing the most recent uncommitted data.
    validations:
      - type: graph_tool_used

  # -- Additional find_control_dependencies tests (74-75) -- expected_state: COMPLETE --

  - id: 5174
    name: badger_find_control_dependencies_b
    category: TOOL_HAPPY_PATH
    description: >
      find_control_dependencies tool against Badger (test B). Target: value log GC.
    query: |
      What conditionals control whether value log garbage collection runs?
    expected_state: COMPLETE
    reference_answer: |
      Value log GC is controlled by the discard stats threshold check,
      the GC ratio parameter, vlog file size comparisons, and the
      rewrite candidate selection based on stale data percentage.
    validations:
      - type: graph_tool_used

  - id: 5175
    name: badger_find_control_dependencies_c
    category: TOOL_HAPPY_PATH
    description: >
      find_control_dependencies tool against Badger (test C). Target: memtable flush.
    query: |
      What conditionals control when a memtable is flushed to disk?
    expected_state: COMPLETE
    reference_answer: |
      Memtable flush is controlled by memtable size exceeding the
      configured threshold, write stall conditions when too many
      memtables are pending flush, and graceful shutdown logic.
    validations:
      - type: graph_tool_used

  # -- Additional find_extractable_regions tests (76-77) -- expected_state: COMPLETE --

  - id: 5176
    name: badger_find_extractable_regions_b
    category: TOOL_HAPPY_PATH
    description: >
      find_extractable_regions tool against Badger (test B). Focus on DB.Open function.
    query: |
      Find extractable regions within the DB.Open function
    expected_state: COMPLETE
    reference_answer: |
      DB.Open has extractable regions for directory initialization,
      manifest loading, memtable setup, value log opening, compaction
      manager initialization, and background goroutine launching.
    validations:
      - type: graph_tool_used

  - id: 5177
    name: badger_find_extractable_regions_c
    category: TOOL_HAPPY_PATH
    description: >
      find_extractable_regions tool against Badger (test C). Focus on refactoring candidates.
    query: |
      Which functions have the most extractable single-entry single-exit regions?
    expected_state: COMPLETE
    reference_answer: |
      Functions with the most SESE regions include writeRequests with
      its validation, WAL, and memtable phases, doCompact with its
      table selection and build phases, and the GC rewrite function.
    validations:
      - type: graph_tool_used

  # -- Additional check_reducibility tests (78-79) -- expected_state: COMPLETE --

  - id: 5178
    name: badger_check_reducibility_b
    category: TOOL_HAPPY_PATH
    description: >
      check_reducibility tool against Badger (test B). Focus on the compaction subsystem.
    query: |
      Check the control flow reducibility of the compaction subsystem
    expected_state: COMPLETE
    reference_answer: |
      The compaction subsystem's control flow is largely reducible with
      structured loop patterns for level iteration and table processing,
      though priority-based scheduling may introduce complex branching.
    validations:
      - type: graph_tool_used

  - id: 5179
    name: badger_check_reducibility_c
    category: TOOL_HAPPY_PATH
    description: >
      check_reducibility tool against Badger (test C). Focus on irreducible regions.
    query: |
      Are there any irreducible control flow regions in Badger?
    expected_state: COMPLETE
    reference_answer: |
      Irreducible regions, if present, are typically found in the error
      recovery paths of write operations, retry logic in compaction,
      and mutual dependencies between GC and compaction scheduling.
    validations:
      - type: graph_tool_used

  # -- Additional find_critical_path tests (80-81) -- expected_state: COMPLETE --

  - id: 5180
    name: badger_find_critical_path_b
    category: TOOL_HAPPY_PATH
    description: >
      find_critical_path tool against Badger (test B). Target: write path to disk.
    query: |
      What is the critical path from a Set operation to data reaching disk?
    expected_state: COMPLETE
    reference_answer: |
      The critical path goes through Txn.Set -> Txn.Commit ->
      sendToWriteCh -> writeRequests -> WAL write -> memtable insert,
      representing the mandatory sequence for durable writes.
    validations:
      - type: graph_tool_used

  - id: 5181
    name: badger_find_critical_path_c
    category: TOOL_HAPPY_PATH
    description: >
      find_critical_path tool against Badger (test C). Target: database recovery.
    query: |
      What is the mandatory call sequence to recover a database from WAL?
    expected_state: COMPLETE
    reference_answer: |
      Database recovery follows DB.Open -> openMemTables -> WAL replay ->
      memtable reconstruction -> manifest verification, ensuring data
      consistency after an unexpected shutdown.
    validations:
      - type: graph_tool_used

  # -- Additional find_module_api tests (82-83) -- expected_state: COMPLETE --

  - id: 5182
    name: badger_find_module_api_b
    category: TOOL_HAPPY_PATH
    description: >
      find_module_api tool against Badger (test B). Target: table package.
    query: |
      What is the public API of the table package?
    expected_state: COMPLETE
    reference_answer: |
      The table package exports Table, Builder, Iterator, and Options
      types with methods for SST file creation, reading, iteration,
      and bloom filter operations for the LSM tree storage layer.
    validations:
      - type: graph_tool_used

  - id: 5183
    name: badger_find_module_api_c
    category: TOOL_HAPPY_PATH
    description: >
      find_module_api tool against Badger (test C). Target: skl (skiplist) package.
    query: |
      What is the public API of the skl skiplist package?
    expected_state: COMPLETE
    reference_answer: |
      The skl package exports Skiplist and Iterator types with methods
      for concurrent key-value insertion, lookup, and ordered iteration
      used as the in-memory data structure for Badger's memtables.
    validations:
      - type: graph_tool_used

  # -- Additional find_weighted_criticality tests (84-85) -- expected_state: COMPLETE --

  - id: 5184
    name: badger_find_weighted_criticality_b
    category: TOOL_HAPPY_PATH
    description: >
      find_weighted_criticality tool against Badger (test B). Focus on the transaction layer.
    query: |
      What are the most critical functions in the transaction layer by weighted importance?
    expected_state: COMPLETE
    reference_answer: |
      Weighted criticality in the transaction layer identifies Txn.Get,
      Txn.Commit, and the oracle timestamp management functions as most
      critical by combined PageRank, betweenness, and degree metrics.
    validations:
      - type: graph_tool_used

  - id: 5185
    name: badger_find_weighted_criticality_c
    category: TOOL_HAPPY_PATH
    description: >
      find_weighted_criticality tool against Badger (test C). Focus on comparing subsystems.
    query: |
      Compare the weighted criticality of the storage layer versus the transaction layer
    expected_state: COMPLETE
    reference_answer: |
      Storage layer functions (table, compaction) score higher on degree
      centrality due to many internal connections, while transaction layer
      functions score higher on betweenness as they bridge the public API
      to the storage internals.
    validations:
      - type: graph_tool_used


  # ── IT-24 through IT-42: New tool tests ──

  - id: 5186
    name: badger_graph_overview
    category: TOOL_HAPPY_PATH
    description: >
      graph_overview tool against Badger key-value store. Get overall graph statistics.
    query: |
      Give me an overview of this codebase's call graph
    expected_state: COMPLETE
    reference_answer: |
      The Badger key-value store call graph contains LSM tree architecture
      spanning packages like DB, Txn, table, compaction, value log.
    validations:
      - type: graph_tool_used

  - id: 5187
    name: badger_graph_overview_b
    category: TOOL_HAPPY_PATH
    description: >
      graph_overview tool against Badger key-value store (test B). Focus on graph density.
    query: |
      How dense is the call graph and what is the average connectivity?
    expected_state: COMPLETE
    reference_answer: |
      The graph has moderate density with most functions having 2-5 callees.
      Hotspot functions have significantly higher degree reflecting the
      core architecture of Badger key-value store.
    validations:
      - type: graph_tool_used

  - id: 5188
    name: badger_graph_overview_c
    category: TOOL_HAPPY_PATH
    description: >
      graph_overview tool against Badger key-value store (test C). Focus on package distribution.
    query: |
      How are functions distributed across packages in the call graph?
    expected_state: COMPLETE
    reference_answer: |
      Functions are distributed across DB, Txn, table, compaction, value log,
      with the core package containing the most edges due to
      orchestration responsibilities.
    validations:
      - type: graph_tool_used

  - id: 5189
    name: badger_explore_package
    category: TOOL_HAPPY_PATH
    description: >
      explore_package tool against Badger key-value store. Explore main badger package.
    query: |
      Explore the main badger package and show its key types and functions
    expected_state: COMPLETE
    reference_answer: |
      The main badger package contains DB, Txn, Entry, Iterator, Options types.
    validations:
      - type: graph_tool_used

  - id: 5190
    name: badger_explore_package_b
    category: TOOL_HAPPY_PATH
    description: >
      explore_package tool against Badger key-value store (test B). Explore table package.
    query: |
      Explore the table package and show its key types and functions
    expected_state: COMPLETE
    reference_answer: |
      The table package contains SST file handling, table builder, iterator.
    validations:
      - type: graph_tool_used

  - id: 5191
    name: badger_explore_package_c
    category: TOOL_HAPPY_PATH
    description: >
      explore_package tool against Badger key-value store (test C). Explore skl package.
    query: |
      Explore the skl package and show its key types and functions
    expected_state: COMPLETE
    reference_answer: |
      The skl package contains skiplist implementation for memtable.
    validations:
      - type: graph_tool_used

  - id: 5192
    name: badger_list_packages
    category: TOOL_HAPPY_PATH
    description: >
      list_packages tool against Badger key-value store. List all packages.
    query: |
      List all packages in this codebase
    expected_state: COMPLETE
    reference_answer: |
      Packages include badger (core), table, skl, y (utils), pb (protobuf), options.
    validations:
      - type: graph_tool_used

  - id: 5193
    name: badger_list_packages_b
    category: TOOL_HAPPY_PATH
    description: >
      list_packages tool against Badger key-value store (test B). Focus on count.
    query: |
      How many packages does this codebase have?
    expected_state: COMPLETE
    reference_answer: |
      The codebase has multiple packages organized by concern,
      including badger (core), table, skl, y (utils), pb (protobuf), options.
    validations:
      - type: graph_tool_used

  - id: 5194
    name: badger_list_packages_c
    category: TOOL_HAPPY_PATH
    description: >
      list_packages tool against Badger key-value store (test C). Focus on hierarchy.
    query: |
      Show the package hierarchy and how packages are organized
    expected_state: COMPLETE
    reference_answer: |
      Packages are organized by concern with badger (core), table, skl, y (utils), pb (protobuf), options
      as the main functional groupings.
    validations:
      - type: graph_tool_used

  - id: 5195
    name: badger_read
    category: TOOL_HAPPY_PATH
    description: >
      Read tool against Badger key-value store.
    query: |
      Show me the contents of db.go
    expected_state: COMPLETE
    reference_answer: |
      DB struct and Open/Close
    validations:
      - type: graph_tool_used

  - id: 5196
    name: badger_read_b
    category: TOOL_HAPPY_PATH
    description: >
      Read tool against Badger key-value store (test B).
    query: |
      Read the txn.go file
    expected_state: COMPLETE
    reference_answer: |
      transaction implementation
    validations:
      - type: graph_tool_used

  - id: 5197
    name: badger_read_c
    category: TOOL_HAPPY_PATH
    description: >
      Read tool against Badger key-value store (test C).
    query: |
      Show me the levels.go file
    expected_state: COMPLETE
    reference_answer: |
      LSM level management
    validations:
      - type: graph_tool_used

  - id: 5198
    name: badger_trace_error_paths
    category: TOOL_HAPPY_PATH
    description: >
      Trace error propagation paths in Badger's DB operations.
    query: |
      How do errors propagate from disk I/O failures up through DB.Open?
    expected_state: COMPLETE
    reference_answer: |
      Errors from disk operations (file open, mmap, directory sync) propagate
      through manifest loading, memtable recovery, and value log initialization
      back to DB.Open callers with wrapped context.
    validations:
      - type: graph_tool_used

  - id: 5199
    name: badger_trace_compaction_flow
    category: TOOL_HAPPY_PATH
    description: >
      Trace the compaction pipeline flow in Badger.
    query: |
      What is the complete call flow for LSM tree compaction?
    expected_state: COMPLETE
    reference_answer: |
      Compaction flows from the compaction manager through level selection,
      table merging, key range computation, and new table creation in the
      levels controller.
    validations:
      - type: graph_tool_used

  - id: 5200
    name: badger_trace_gc_pipeline
    category: TOOL_HAPPY_PATH
    description: >
      Trace the garbage collection pipeline in Badger's value log.
    query: |
      Trace the call chain for value log garbage collection
    expected_state: COMPLETE
    reference_answer: |
      Value log GC flows from RunValueLogGC through log file selection,
      entry iteration, rewriting valid entries, and discarding stale
      value log files.
    validations:
      - type: graph_tool_used

  - id: 5201
    name: badger_trace_txn_lifecycle
    category: TOOL_HAPPY_PATH
    description: >
      Trace the transaction lifecycle in Badger.
    query: |
      What is the full lifecycle of a Badger transaction from creation to commit?
    expected_state: COMPLETE
    reference_answer: |
      Transaction lifecycle: DB.NewTransaction creates a Txn, which tracks
      reads and writes. On Commit, it acquires a commit timestamp, writes
      to the value log, then applies to the LSM tree via batch operations.
    validations:
      - type: graph_tool_used

  - id: 5202
    name: badger_trace_iterator_seek
    category: TOOL_HAPPY_PATH
    description: >
      Trace the iterator seek path across LSM levels.
    query: |
      What functions are involved when Iterator.Seek traverses the LSM tree?
    expected_state: COMPLETE
    reference_answer: |
      Iterator.Seek involves merge iterator coordination across levels,
      table index binary search, block cache lookup, and bloom filter
      checks for efficient key location.
    validations:
      - type: graph_tool_used

  - id: 5203
    name: badger_trace_write_batch
    category: TOOL_HAPPY_PATH
    description: >
      Trace the batch write path in Badger.
    query: |
      What is the call path for writing a batch of entries to Badger?
    expected_state: COMPLETE
    reference_answer: |
      Batch write flows through WriteBatch.Set, accumulating entries,
      then WriteBatch.Flush commits through the transaction pipeline
      to the value log and memtable.
    validations:
      - type: graph_tool_used

  - id: 5204
    name: badger_glob
    category: TOOL_HAPPY_PATH
    description: >
      Glob tool against Badger key-value store.
    query: |
      Find all files matching *_test.go in root
    expected_state: COMPLETE
    reference_answer: |
      The Glob tool processes *_test.go in root for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5205
    name: badger_glob_b
    category: TOOL_HAPPY_PATH
    description: >
      Glob tool against Badger key-value store (test B).
    query: |
      Find files matching table/*.go
    expected_state: COMPLETE
    reference_answer: |
      The Glob tool processes table/*.go for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5206
    name: badger_glob_c
    category: TOOL_HAPPY_PATH
    description: >
      Glob tool against Badger key-value store (test C).
    query: |
      Search for skl/*.go files
    expected_state: COMPLETE
    reference_answer: |
      The Glob tool processes skl/*.go for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5207
    name: badger_grep
    category: TOOL_HAPPY_PATH
    description: >
      Grep tool against Badger key-value store.
    query: |
      Search for DB.Close usage in the codebase
    expected_state: COMPLETE
    reference_answer: |
      The Grep tool processes DB.Close usage for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5208
    name: badger_grep_b
    category: TOOL_HAPPY_PATH
    description: >
      Grep tool against Badger key-value store (test B).
    query: |
      Find all error wrapping patterns
    expected_state: COMPLETE
    reference_answer: |
      The Grep tool processes error wrapping patterns for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5209
    name: badger_grep_c
    category: TOOL_HAPPY_PATH
    description: >
      Grep tool against Badger key-value store (test C).
    query: |
      Search for sync.Mutex usage
    expected_state: COMPLETE
    reference_answer: |
      The Grep tool processes sync.Mutex usage for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5210
    name: badger_diff
    category: TOOL_HAPPY_PATH
    description: >
      Diff tool against Badger key-value store.
    query: |
      Compare managed vs unmanaged mode
    expected_state: COMPLETE
    reference_answer: |
      The Diff tool processes managed vs unmanaged mode for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5211
    name: badger_diff_b
    category: TOOL_HAPPY_PATH
    description: >
      Diff tool against Badger key-value store (test B).
    query: |
      Show differences between default vs custom Options
    expected_state: COMPLETE
    reference_answer: |
      The Diff tool processes default vs custom Options for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5212
    name: badger_diff_c
    category: TOOL_HAPPY_PATH
    description: >
      Diff tool against Badger key-value store (test C).
    query: |
      Compare memtable vs SST iteration
    expected_state: COMPLETE
    reference_answer: |
      The Diff tool processes memtable vs SST iteration for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5213
    name: badger_tree
    category: TOOL_HAPPY_PATH
    description: >
      Tree tool against Badger key-value store.
    query: |
      Show the top-level structure
    expected_state: COMPLETE
    reference_answer: |
      The Tree tool processes top-level structure for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5214
    name: badger_tree_b
    category: TOOL_HAPPY_PATH
    description: >
      Tree tool against Badger key-value store (test B).
    query: |
      Show the table package internals structure
    expected_state: COMPLETE
    reference_answer: |
      The Tree tool processes table package internals for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5215
    name: badger_tree_c
    category: TOOL_HAPPY_PATH
    description: >
      Tree tool against Badger key-value store (test C).
    query: |
      Display the test fixtures layout
    expected_state: COMPLETE
    reference_answer: |
      The Tree tool processes test fixtures for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5216
    name: badger_trace_manifest_sync
    category: TOOL_HAPPY_PATH
    description: >
      Trace the manifest file synchronization flow.
    query: |
      How does Badger maintain manifest consistency during table operations?
    expected_state: COMPLETE
    reference_answer: |
      Manifest operations go through manifestFile.addChanges which
      serializes level changes, writes to the manifest file with
      CRC checksums, and syncs to disk for crash recovery.
    validations:
      - type: graph_tool_used

  - id: 5217
    name: badger_trace_memtable_flush
    category: TOOL_HAPPY_PATH
    description: >
      Trace the memtable flush to SSTable path.
    query: |
      What is the call chain when a memtable is flushed to an SSTable on disk?
    expected_state: COMPLETE
    reference_answer: |
      Memtable flush involves skiplist iteration, table builder accumulation,
      block encoding, index creation, bloom filter generation, and file
      sync to create a new SSTable.
    validations:
      - type: graph_tool_used

  - id: 5218
    name: badger_trace_cache_eviction
    category: TOOL_HAPPY_PATH
    description: >
      Trace the block cache eviction mechanism.
    query: |
      How does the block cache handle eviction when capacity is reached?
    expected_state: COMPLETE
    reference_answer: |
      The block cache uses a concurrent LRU or RISTRETTO-based policy
      for eviction, coordinating between admission and eviction to
      maintain cache efficiency under memory pressure.
    validations:
      - type: graph_tool_used

  - id: 5219
    name: badger_validate_syntax
    category: TOOL_HAPPY_PATH
    description: >
      validate_syntax tool against Badger key-value store.
    query: |
      Validate the syntax of db.go
    expected_state: COMPLETE
    reference_answer: |
      The validate_syntax tool processes db.go for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5220
    name: badger_validate_syntax_b
    category: TOOL_HAPPY_PATH
    description: >
      validate_syntax tool against Badger key-value store (test B).
    query: |
      Check the syntax of txn.go
    expected_state: COMPLETE
    reference_answer: |
      The validate_syntax tool processes txn.go for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5221
    name: badger_validate_syntax_c
    category: TOOL_HAPPY_PATH
    description: >
      validate_syntax tool against Badger key-value store (test C).
    query: |
      Verify the syntax of levels.go
    expected_state: COMPLETE
    reference_answer: |
      The validate_syntax tool processes levels.go for
      the Badger key-value store codebase.
    validations:
      - type: graph_tool_used

  - id: 5222
    name: badger_find_entry_points_b
    category: TOOL_HAPPY_PATH
    description: >
      find_entry_points tool against Badger key-value store (test B). Focus on exported DB methods.
    query: |
      exported DB methods in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      Open, Close, View, Update, Subscribe
    validations:
      - type: graph_tool_used

  - id: 5223
    name: badger_find_entry_points_c
    category: TOOL_HAPPY_PATH
    description: >
      find_entry_points tool against Badger key-value store (test C). Focus on batch operation entry.
    query: |
      batch operation entry in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      WriteBatch, NewWriteBatch, Flush
    validations:
      - type: graph_tool_used

  - id: 5224
    name: badger_trace_data_flow_b
    category: TOOL_HAPPY_PATH
    description: >
      trace_data_flow tool against Badger key-value store (test B). Focus on read path.
    query: |
      read path in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      Txn.Get, memtable lookup, level search, value log fetch
    validations:
      - type: graph_tool_used

  - id: 5225
    name: badger_trace_data_flow_c
    category: TOOL_HAPPY_PATH
    description: >
      trace_data_flow tool against Badger key-value store (test C). Focus on compaction data.
    query: |
      compaction data in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      level tables, merge iterator, new table building
    validations:
      - type: graph_tool_used

  - id: 5226
    name: badger_trace_error_flow_b
    category: TOOL_HAPPY_PATH
    description: >
      trace_error_flow tool against Badger key-value store (test B). Focus on transaction errors.
    query: |
      transaction errors in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      ErrConflict, ErrReadOnlyTxn, ErrDiscardedTxn
    validations:
      - type: graph_tool_used

  - id: 5227
    name: badger_trace_error_flow_c
    category: TOOL_HAPPY_PATH
    description: >
      trace_error_flow tool against Badger key-value store (test C). Focus on corruption errors.
    query: |
      corruption errors in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      checksum mismatch, manifest corruption, recovery
    validations:
      - type: graph_tool_used

  - id: 5228
    name: badger_build_minimal_context_b
    category: TOOL_HAPPY_PATH
    description: >
      build_minimal_context tool against Badger key-value store (test B). Focus on compaction.
    query: |
      compaction in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      levelsController, compactDef, table merge
    validations:
      - type: graph_tool_used

  - id: 5229
    name: badger_build_minimal_context_c
    category: TOOL_HAPPY_PATH
    description: >
      build_minimal_context tool against Badger key-value store (test C). Focus on iterator.
    query: |
      iterator in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      Iterator, Item, IteratorOptions, prefix scanning
    validations:
      - type: graph_tool_used

  - id: 5230
    name: badger_find_similar_code_b
    category: TOOL_HAPPY_PATH
    description: >
      find_similar_code tool against Badger key-value store (test B). Focus on value log GC.
    query: |
      value log GC in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      iterating entries, copying live data, similar to compaction
    validations:
      - type: graph_tool_used

  - id: 5231
    name: badger_find_similar_code_c
    category: TOOL_HAPPY_PATH
    description: >
      find_similar_code tool against Badger key-value store (test C). Focus on stream framework.
    query: |
      stream framework in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      key iteration, transformation, similar to backup
    validations:
      - type: graph_tool_used

  - id: 5232
    name: badger_find_config_usage_b
    category: TOOL_HAPPY_PATH
    description: >
      find_config_usage tool against Badger key-value store (test B). Focus on compaction Options.
    query: |
      compaction Options in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      NumLevelZeroTables, LevelSizeMultiplier, NumCompactors
    validations:
      - type: graph_tool_used

  - id: 5233
    name: badger_find_config_usage_c
    category: TOOL_HAPPY_PATH
    description: >
      find_config_usage tool against Badger key-value store (test C). Focus on value log Options.
    query: |
      value log Options in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      ValueLogFileSize, ValueThreshold, NumMemtables
    validations:
      - type: graph_tool_used

  - id: 5234
    name: badger_summarize_file_b
    category: TOOL_HAPPY_PATH
    description: >
      summarize_file tool against Badger key-value store (test B). Focus on txn.go.
    query: |
      txn.go in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      Txn struct, Get/Set/Delete, commit protocol
    validations:
      - type: graph_tool_used

  - id: 5235
    name: badger_summarize_file_c
    category: TOOL_HAPPY_PATH
    description: >
      summarize_file tool against Badger key-value store (test C). Focus on levels.go.
    query: |
      levels.go in Badger key-value store?
    expected_state: COMPLETE
    reference_answer: |
      levelsController, compaction scheduling, level management
    validations:
      - type: graph_tool_used

  # -- GR-58: CRS TraceStep Verification Tests --

  - id: 5236
    name: badger_crs_find_callers
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58: Verify find_callers produces CRS TraceStep. Target: Txn.Get.
    query: |
      Who calls the Get method on the Txn type?
    expected_state: COMPLETE
    reference_answer: |
      find_callers tool was used and produced a CRS TraceStep recording the query
      for Txn.Get with match_count, total_callers, and used_inheritance_path metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5237
    name: badger_crs_find_callees
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58: Verify find_callees produces CRS TraceStep. Target: DB.Open.
    query: |
      What functions does DB.Open call?
    expected_state: COMPLETE
    reference_answer: |
      find_callees tool was used and produced a CRS TraceStep recording the query
      for DB.Open with resolved_count, external_count, and total_count metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  # -- GR-58: CRS TraceStep Verification (IT-03 to IT-42) --

  - id: 5238
    name: badger_crs_get_call_chain
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-05: Verify get_call_chain produces CRS TraceStep against Badger.
    query: |
      Show the downstream call chain from DB.Open in Badger.
    expected_state: COMPLETE
    reference_answer: |
      get_call_chain tool was used and produced a CRS TraceStep with
      chain_length, depth, direction, and truncated metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5239
    name: badger_crs_find_important
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-10: Verify find_important produces CRS TraceStep against Badger.
    query: |
      Find the most important and central functions in Badger.
    expected_state: COMPLETE
    reference_answer: |
      find_important tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5240
    name: badger_crs_find_loops
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-14: Verify find_loops produces CRS TraceStep against Badger.
    query: |
      Find loops in Badger's call graph.
    expected_state: COMPLETE
    reference_answer: |
      find_loops tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5241
    name: badger_crs_check_reducibility
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-19: Verify check_reducibility produces CRS TraceStep against Badger.
    query: |
      Check if Badger's call graph is reducible.
    expected_state: COMPLETE
    reference_answer: |
      check_reducibility tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5242
    name: badger_crs_find_path
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-23: Verify find_path produces CRS TraceStep against Badger.
    query: |
      Find the path between DB.Open and Txn.Commit in Badger.
    expected_state: COMPLETE
    reference_answer: |
      find_path tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5243
    name: badger_crs_find_entry_points
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-28: Verify find_entry_points produces CRS TraceStep against Badger.
    query: |
      Find the entry points in Badger's codebase.
    expected_state: COMPLETE
    reference_answer: |
      find_entry_points tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5244
    name: badger_crs_find_similar_code
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-32: Verify find_similar_code produces CRS TraceStep against Badger.
    query: |
      Find code similar to the Txn.Get function in Badger.
    expected_state: COMPLETE
    reference_answer: |
      find_similar_code tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5245
    name: badger_crs_glob
    category: TOOL_CRS_VERIFICATION
    description: >
      GR-58/IT-37: Verify glob tool produces CRS TraceStep against Badger.
    query: |
      Find all .go files in the Badger codebase.
    expected_state: COMPLETE
    reference_answer: |
      glob tool was used and produced a CRS TraceStep with appropriate metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5246
    name: badger_crs_trace_flow
    category: TOOL_CRS_VERIFICATION
    description: >
      CRS verification: trace analysis records CRS state correctly.
    query: |
      Trace how errors propagate from value log corruption to the caller
    expected_state: COMPLETE
    reference_answer: |
      The trace analysis tool records CRS state for value log corruption
      error propagation in the Badger key-value store codebase.
    validations:
      - type: crs_state_recorded

  # -- IT-01/IT-02/IT-03: Second CRS TraceStep Verification --

  - id: 5247
    name: badger_crs_find_callers_b
    category: TOOL_CRS_VERIFICATION
    description: >
      IT-01: Second CRS verification for find_callers against Badger. Target: txn.Commit.
    query: |
      Who calls the txn.Commit method in Badger?
    expected_state: COMPLETE
    reference_answer: |
      find_callers tool was used and produced a CRS TraceStep with
      match_count, total_callers, and used_inheritance_path metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5248
    name: badger_crs_find_callees_b
    category: TOOL_CRS_VERIFICATION
    description: >
      IT-02: Second CRS verification for find_callees against Badger. Target: DB.NewTransaction.
    query: |
      What functions does DB.NewTransaction call in Badger?
    expected_state: COMPLETE
    reference_answer: |
      find_callees tool was used and produced a CRS TraceStep with
      resolved_count, external_count, and total_count metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5249
    name: badger_crs_find_implementations_a
    category: TOOL_CRS_VERIFICATION
    description: >
      IT-03: First CRS verification for find_implementations against Badger. Target: Iterator.
    query: |
      What types implement the Iterator interface in Badger?
    expected_state: COMPLETE
    reference_answer: |
      find_implementations tool was used and produced a CRS TraceStep with
      match_count, total_implementations, and index_used metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present

  - id: 5250
    name: badger_crs_find_implementations_b
    category: TOOL_CRS_VERIFICATION
    description: >
      IT-03: Second CRS verification for find_implementations against Badger. Target: TableInterface.
    query: |
      What types implement the TableInterface in Badger?
    expected_state: COMPLETE
    reference_answer: |
      find_implementations tool was used and produced a CRS TraceStep with
      match_count, total_implementations, and index_used metadata.
    validations:
      - type: graph_tool_used
      - type: crs_trace_step_present
